<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        /* Stil for hele siden */
        body,html{
            margin: 0;
            padding: 0;
            font-family: Bahnschrift;
            background-color: #065C56;
        }

        /* Overskriften */
        h1 {
            text-align: center;
            color: #cbf3f0;
            font-size: xxx-large;

        }

        /* Felt for selve innloggingen */
        .boks {
            background-color: #cbf3f0;
            bottom: 0;
            position: absolute; /*for å få boksen til å ligge på bunn*/
            text-align: center;
            width: 100%;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            height: 550px;
            color: #065C56;
            font-size: xx-large;
        }

        /* Input feltene */
        .tekstboks {
            -webkit-appearance: none; /*fjerner standarden som vanligvis ligger på tekstbokser*/
            border-radius: 30px;
            border: 2px solid #065C56;
            height: 50px;
            width: 80%;
        }

        /* Knappen for innlogging */
        .login {
            background-color: #ff9f1c;
            border: none;
            color: white;
            border-radius: 30px;
            padding: 15px;
            margin-left: 62%;
            cursor: pointer;
        }

        /* Tekst for registrering */
        .nybruker {
            font-size: medium;
            color: #065C56;
        }
    </style>
<body>
<p> <h1>Kollektivet</h1> </p>

<div class="boks">
    <p>Logg inn</p>

    <form>
        <p><input placeholder=" Brukernavn" class="tekstboks" type="text" id="emaillogin"></p>
        <p><input placeholder=" Passord" class="tekstboks" type="password" id="passlogin"></p>
    </form>

    <p>
        <button class="login" id="login">Logg inn</button>
    </p> <br> <br>

    <p class="nybruker"> Ny bruker?
        <a href="registrer.html" style="text-decoration: underline; color: #065C56">Registrer her</a>
    </p>

</div>

<script type="module">
    // Importer funksjonene som trengs fra SDK, bare funksjoner for innlogging
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.4.0/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Vår web app Firebase konfigurasjon
    const firebaseConfig = {
        apiKey: "AIzaSyC-h5KwaI2lRtQiK4vzAg0y2ODCEAcAm4Y",
        authDomain: "registrer-loggin.firebaseapp.com",
        databaseURL: "https://registrer-loggin-default-rtdb.europe-west1.firebasedatabase.app/",
        projectId: "registrer-loggin",
        storageBucket: "registrer-loggin.appspot.com",
        messagingSenderId: "753564831618",
        appId: "1:753564831618:web:abfe5116635b66e141099b"
    };

    // Initialiser Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Funksjonen som settes igang ved knappen
    document.getElementById("login").addEventListener('click', function(){

        // Henter ut verdiene fra begge input feltene
        const email1 = document.getElementById("emaillogin").value;
        const password1 = document.getElementById("passlogin").value;

        // Kjør funksjonen signInWithEmailAndPassword og sjekk om dataen stemmer med databasen
        signInWithEmailAndPassword(auth, email1, password1)
            .then((userCredential) => {
                // Logg inn brukeren
                const user = userCredential.user;
                // Send brukeren til neste side
                location.replace("oppgaver.html");
            })
            // Hvis passord eller email er feil, send ut feilmelding
            .catch((error) => {
                const errorCode = error.code;
                const errorMessage = error.message;
                alert("Feil passord eller brukernavn " + errorMessage);
            });
    })
</script>

</body>
</html>


